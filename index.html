<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Liang Jiahao" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="Criya">
<meta property="og:url" content="http://criya.top/index.html">
<meta property="og:site_name" content="Criya">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Criya">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Criya" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 1;} </style>


<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">


<title>Criya</title>

<script src="//cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js",
        scrollreveal: "//cdnjs.cloudflare.com/ajax/libs/scrollReveal.js/3.4.0/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/myIcon.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Liang Jiahao</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:957479400@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/Criya" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go/">Go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphic/">graphic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Liang Jiahao</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/myIcon.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Liang Jiahao</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:957479400@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/Criya" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-AJAX学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/21/AJAX学习笔记/" class="article-date">
      <time datetime="2018-05-21T05:46:01.000Z" itemprop="datePublished">2018-05-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/21/AJAX学习笔记/">AJAX学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="AJAX之前"><a href="#AJAX之前" class="headerlink" title="AJAX之前"></a>AJAX之前</h2><p>回顾一下最早向服务器发请求的方式</p>
<ol>
<li><code>&lt;form&gt;</code>表单发送，最早的发请求方式，可以发各种类型的请求，缺点是每次发送完请求都需要刷新页面，后来前辈们的做法是在iframe中刷新页面。</li>
<li>利用<code>&lt;a&gt;</code>标签，只能发送GET请求，页面会被刷新。</li>
<li><code>&lt;img&gt;</code>和<code>&lt;link&gt;</code>，只能发送GET请求，不过页面不会被刷新，但是必须以图片或者css, favicon的形式展示。</li>
<li>利用<code>&lt;script&gt;</code>标签，只能发送GET请求且页面不会刷新，必须以脚本形式运行。利用SRJ技术延伸出了JSONP技术，解决跨域请求的好办法。</li>
</ol>
<p>上面几种方法是我们前端最常见的向后端发送请求的方法，它们或多或少都可以解决我们的需求，但是都不完美，我们没有办法在浏览器中随心所欲的向服务器发送请求。</p>
<p>有没有办法可以做到，我们可以发送任意类型的请求，以我们自己方式展示而不是img, css, script这些呢？</p>
<h2 id="AJAX的出现"><a href="#AJAX的出现" class="headerlink" title="AJAX的出现"></a>AJAX的出现</h2><h3 id="ActiveX"><a href="#ActiveX" class="headerlink" title="ActiveX"></a>ActiveX</h3><p>在AJAX正式登上舞台之前，那时还是IE的天下，微软首先做出了突破。<br>IE5率先引入了一个ActiveX对象，可以让JS直接发送HTTP请求。</p>
<h3 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h3><p>ActiveX出现后，Mozilla, Safari, Opera也随之模仿，引入了一个叫<strong>XMLHttpRequest</strong>的对象，后来被W3C纳入了规范。</p>
<p>那么AJAX到底是什么呢？<br>它跟JSONP一样，也是一种解决方案的名字。<br>Jesse James Garrett将下面这个技术取名为AJAX：异步的JavaScript和XML。</p>
<ol>
<li>使用XMLHttpRequest发送请求</li>
<li>服务器返回XML格式字符串</li>
<li>JS解析XML并更新局部页面</li>
</ol>
<h3 id="AJAX的使用"><a href="#AJAX的使用" class="headerlink" title="AJAX的使用"></a>AJAX的使用</h3><p>在使用AJAX之前，再回顾一下JSONP是怎么实现的吧，看看jQuery是怎么用的（注释的部分是原生JS实现）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>灵梦的塞钱箱: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"amount"</span>&gt;</span>&amp;&amp;&amp;money&amp;&amp;&amp;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"pay"</span>&gt;</span>打钱<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        // var callback = "reimu"+parseInt(Math.random()*10000000, 10)</span></span><br><span class="line"><span class="undefined">        // window[callback] = function (response, money) &#123;</span></span><br><span class="line"><span class="undefined">        //     //接收服务器返回的数据,</span></span><br><span class="line"><span class="undefined">        //     //如果请求成功，则更改页面信息</span></span><br><span class="line"><span class="undefined">        //     // if(response === 'success')&#123;</span></span><br><span class="line"><span class="undefined">        //     //     amount.innerHTML = money </span></span><br><span class="line"><span class="undefined">        //     // &#125;           </span></span><br><span class="line"><span class="undefined">        // &#125;</span></span><br><span class="line"><span class="undefined">        // pay.addEventListener("click", ()=&gt;&#123;</span></span><br><span class="line"><span class="undefined">        //     // var money = parseInt(amount.innerHTML, 10)</span></span><br><span class="line"><span class="undefined">        //     // amount.innerHTML = money+1;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        //     var render = document.createElement("script")</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        //     //向服务器发送请求，并把回调函数的名字传过去</span></span><br><span class="line"><span class="undefined">        //     render.src = `/pay?callback=$&#123;callback&#125;`</span></span><br><span class="line"><span class="undefined">        //     document.body.appendChild(render)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        // &#125;)</span></span><br><span class="line"><span class="undefined">        pay.addEventListener("click", ()=&gt;&#123;</span></span><br><span class="line"><span class="undefined">            $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">                url: '/pay',</span></span><br><span class="line"><span class="undefined">                dataType: 'jsonp',</span></span><br><span class="line"><span class="undefined">                success: (response)=&gt;&#123;</span></span><br><span class="line"><span class="undefined">                    if(response === "success")&#123;</span></span><br><span class="line"><span class="undefined">                        amount.innerHTML = parseInt(amount.innerHTML, 10) + 1</span></span><br><span class="line"><span class="undefined">                    &#125;                  </span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>后台的代码也非常简单，获取一下callback然后将数据（”success”）通过callback传回去而已。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(path === <span class="string">'/pay'</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> callback = query.callback<span class="comment">//从发送GET请求的查询参数获取callback名</span></span><br><span class="line">        response.statusCode = <span class="number">200</span></span><br><span class="line">        response.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/javascript; charset=utf-8'</span>)</span><br><span class="line">        <span class="keyword">let</span> amount = fs.readFileSync(<span class="string">"./money.db"</span>, <span class="string">"utf-8"</span>)</span><br><span class="line">        amount ++</span><br><span class="line">        fs.writeFileSync(<span class="string">"./money.db"</span>, amount)</span><br><span class="line">        <span class="comment">// response.write(`$&#123;callback&#125;("scuess")`) </span></span><br><span class="line">        response.write(<span class="string">`<span class="subst">$&#123;callback&#125;</span>("success")`</span>)</span><br><span class="line">        response.end()</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h3><p>我们的AJAX的第一步是：<strong>使用XMLHttpRequest发送请求</strong><br>那么就我们先来看看这个东西。<br>使用XMLHttpRequest非常简单，只需要三行代码就可以发送一个HTTP请求</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pay.addEventListener(<span class="string">"click"</span>, ()=&gt;&#123;</span><br><span class="line">				<span class="comment">//这个对象有我们需要的所有信息</span></span><br><span class="line">            <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            request.open(<span class="string">"GET"</span>, <span class="string">"/ajax"</span>)</span><br><span class="line">            request.send()</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>
<p>open可以接受五个参数，我们一般只填写前两个就够了，默认就是异步的（不是异步就不是AJAX了）。method可以使任意方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> open(</span><br><span class="line">   DOMString method,</span><br><span class="line">   DOMString url,</span><br><span class="line">   optional boolean <span class="keyword">async</span>,</span><br><span class="line">   optional DOMString user,</span><br><span class="line">   optional DOMString password</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>XMLHttpRequest顾名思义最早是用来传XML数据的，虽然现在已经没人用了（大雾），但是为了尊重历史，我们也从XML开始用起好了，毕竟我们学的是技术，XML只是工具，万变不离其中。<br>现在我们来简单实现一下AJAX的第二步，<strong>服务器返回XML格式字符串</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (path === <span class="string">'/ajax'</span>) &#123;</span><br><span class="line">       response.statusCode = <span class="number">200</span></span><br><span class="line">       response.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/xml; charset=utf-8"</span>)</span><br><span class="line">		<span class="comment">//这个xml是网上随便找的</span></span><br><span class="line">       response.write(<span class="string">`</span></span><br><span class="line"><span class="string">           &lt;note&gt;</span></span><br><span class="line"><span class="string">               &lt;to&gt;Tove&lt;/to&gt;</span></span><br><span class="line"><span class="string">               &lt;from&gt;Jani&lt;/from&gt;</span></span><br><span class="line"><span class="string">               &lt;heading&gt;Reminder&lt;/heading&gt;</span></span><br><span class="line"><span class="string">               &lt;body&gt;Don't forget me this weekend!&lt;/body&gt;              </span></span><br><span class="line"><span class="string">           &lt;/note&gt;</span></span><br><span class="line"><span class="string">       `</span>)</span><br><span class="line">       response.end()</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>后台代码写好了，如果接收到访问/ajax的请求，向它返回一段XML。</p>
<p>接下来就可以轮到AJAX的第三步了，<strong>JS解析XML并更新局部页面</strong>。</p>
<p>现在回到我们的前端，就像最上面说的那样，XMLHttpRequest包含了我们需要的所有东西，当然也包括后台返回给我们response，我们只需要查看XMLHttpRequest对象的response属性就可以获取响应。</p>
<h4 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h4><p>我们直接调用response就可以了吗？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pay.addEventListener(<span class="string">"click"</span>, ()=&gt;&#123;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">    request.open(<span class="string">"GET"</span>, <span class="string">"/ajax"</span>)</span><br><span class="line">    request.send()</span><br><span class="line">    <span class="built_in">console</span>.log(request.responseText)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>很遗憾，你的浏览器可能什么都不会返回给你。可是我们在F12中是能够看到我们的response的。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-f4497e586027656d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这是因为我们通过XMLHttpRequest发送请求的整个过程是异步的，从①这个request对象发起请求到收到请求与②我们查询request对象是同时进行的。</p>
<p>我们可以看一下它们花费的时间</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.time()</span><br><span class="line"><span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">request.open(<span class="string">"GET"</span>, <span class="string">"/ajax"</span>)</span><br><span class="line">request.send()</span><br><span class="line"><span class="built_in">console</span>.log(request.responseText)</span><br><span class="line"><span class="built_in">console</span>.timeEnd() <span class="comment">// 结果在0.7~1 ms之间浮动</span></span><br></pre></td></tr></table></figure>
<p>再看看我们获取到响应的时间，是远超我们查询时时间的。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-dafd42d56226098d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>那有什么办法可以等到浏览器接收到响应之后再获取响应内容呢？<br>当然有，XMLHttpRequest给我们提供了一个很便利属性和api。</p>
<h4 id="readyState"><a href="#readyState" class="headerlink" title="readyState"></a>readyState</h4><blockquote>
<p>XMLHttpRequest.readyState 属性返回一个 XMLHttpRequest  代理当前所处的状态。一个 XHR 代理总是处于下列状态中的一个：<br>0        代理被创建，但尚未调用 open() 方法。<br>1        open() 方法已经被调用。<br>2        send() 方法已经被调用，并且头部和状态已经可获得。<br>3        下载中； responseText 属性已经包含部分数据。<br>4        下载操作已完成。</p>
</blockquote>
<p>我们只需关注这个readyState即可，当它的状态码为4的时候就可以获取到response了。可以通过一个简单的例子演示一下，我们每1ms访问一次readyState</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer = setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(request.response);</span><br><span class="line">                <span class="keyword">if</span>(request.readyState === <span class="number">4</span>)&#123;</span><br><span class="line">                    <span class="built_in">window</span>.clearInterval(timer)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-c41fb57a0d269a19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>可以看到，实际上第五次访问时response加载完毕（这些浏览器提供的api还有setInterval都不是很精确的不用很在意，大雾- -！）。</p>
<p>XMLHttpRequest提供了一个便利的api，onreadystatechange事件，readyState的每一次变动都会被监听到</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    request.onreadystatechange = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(request.readyState === <span class="number">4</span>)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"加载完毕"</span>)</span><br><span class="line">            <span class="keyword">var</span> str = request.responseText</span><br><span class="line">            <span class="keyword">var</span> xml = (<span class="keyword">new</span> DOMParser()).parseFromString(str, <span class="string">"text/xml"</span>)           </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>到这就实现了一个简单的怀旧版AJAX，之后就是对xml各种复杂的DOM操作了。<br>当然我们现代人现在用的都是JSON，不过道理都是一样。</p>
<h2 id="AJAX的限制"><a href="#AJAX的限制" class="headerlink" title="AJAX的限制"></a>AJAX的限制</h2><p>基于安全问题的同源策略的限制，我们希望发送跨站请求时，是无法直接发送AJAX请求的。<br>最简单的方法就是使用CORS，我们只需要在后端的API上添加response header<br><code>Access-Control-Allow-Orign: &quot;&lt;from orign&gt;&quot;</code></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-前端向后端发送请求，JSONP学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/19/前端向后端发送请求，JSONP学习笔记/" class="article-date">
      <time datetime="2018-05-19T06:37:00.000Z" itemprop="datePublished">2018-05-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/19/前端向后端发送请求，JSONP学习笔记/">前端向后端发送请求，JSONP学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="原始时代"><a href="#原始时代" class="headerlink" title="原始时代"></a>原始时代</h2><p>在最早的时候，当我们需要向服务器提交请求时，用的是<code>&lt;form&gt;</code>表单提交到服务器，服务器接收到请求并且返回响应后，浏览器的页面是会刷新的。也就是说我们每次更新一个数据，都需要刷新当前页面一次，这种行为是无法忍受的。</p>
<p>为了解决这个问题，前辈们最先想到的方法就是使用一个<code>&lt;iframe&gt;</code>，将刷新结果放在<code>&lt;iframe&gt;</code>中显示，这样我们页面浏览就不会受到太大的影响。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/pay"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"result"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"付款"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"about:blank"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">height</span>=<span class="string">"200px"</span> <span class="attr">name</span>=<span class="string">"result"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;iframe&gt;</code>的各种缺点就不提了，随着技术的发展与进步现在几乎没有多少网页会再使用<code>&lt;iframe&gt;</code>了。</p>
<p>于是乎为了避免使用<code>&lt;iframe&gt;</code>，前辈们又思考是否可以不用<code>&lt;form&gt;</code>发送请求呢？<br>我们发现<code>&lt;img&gt;</code> <code>&lt;link&gt;</code> <code>&lt;a&gt;</code>，这些标签都是通过向服务器发送请求以获取资源的，也就是说我们可以用这些标签代替<code>&lt;form&gt;</code>向服务器发送一个请求。</p>
<h3 id="用img构建GET请求"><a href="#用img构建GET请求" class="headerlink" title="用img构建GET请求"></a>用img构建GET请求</h3><p>img的加载就是一个GET请求，如果我们用img来加载一个假的图片的话，就可以变相伪造一个请求了。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"button"</span>&gt;</span>付款<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    button.onclick = <span class="function"><span class="params">()</span>=&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="javascript">        img.src = <span class="string">"/pay"</span></span></span><br><span class="line"><span class="javascript">        img.onload = <span class="function"><span class="params">()</span>=&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">"付款成功"</span>)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        img.onerror = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">"付款失败"</span>)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这样我们就可以通过动态创建一个img设置它的src为服务器请求地址，来构造一个GET请求（使用这种方法无法产生POST请求）。这样后端再做一些处理（例如当成功时返回一个1x1的透明图片），前端就可以通过onload和oneror来判断请求成功与否。</p>
<h3 id="用script构建GET请求"><a href="#用script构建GET请求" class="headerlink" title="用script构建GET请求"></a>用script构建GET请求</h3><p>与<code>&lt;img&gt;</code>一样，<code>&lt;script&gt;</code>也可以通过src来访问服务器。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id=<span class="string">"button"</span>&gt;付款&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">    button.onclick = ()=&gt; &#123;</span></span><br><span class="line"><span class="regexp">        let spt = document.createElement("script");</span></span><br><span class="line"><span class="regexp">        spt.src = "/</span>pay<span class="string">";</span></span><br><span class="line"><span class="string">        document.body.appendChild(spt);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        spt.onload = ()=&gt; &#123;</span></span><br><span class="line"><span class="string">            alert("</span>付款成功<span class="string">");</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        spt.onerror = () =&gt; &#123;</span></span><br><span class="line"><span class="string">            alert("</span>付款失败<span class="string">");</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>与<code>&lt;img&gt;</code>不同的是，动态创建的<code>&lt;script&gt;</code>必须插入到html中才能生效。<br>与上面一种方法相比较，动态创建js的方式不需要添加一个无谓的图片来浪费，但是js也是有自己的副作用的，那就是服务器返回的js代码一定会执行（因为它已经添加的html中了），由此我们可以延伸出直接通过后端来响应页面的成功请求。<br>我们前端就不需要像之前那样监听onload事件了，因为后端返回的<code>&lt;script&gt;</code>会先执行，我们在那上面执行成功代码就可以了。<br>因为每次响应都会在html添加一个<code>&lt;script&gt;</code>非常不美观，所以我们在onload里把至这些新插入的标签移除就可以了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">button.onload = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">	e.currentTarget.remove();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种方案通过动态创建<code>&lt;script&gt;</code>来构造GET请求的方法被叫做SRJ, server render javascript。</p>
<h2 id="JSONP跨站请求"><a href="#JSONP跨站请求" class="headerlink" title="JSONP跨站请求"></a>JSONP跨站请求</h2><p>我们发现，使用html的带有src属性的标签都可以构造一个GET请求（不能构造POST），并且这个请求是可以跨站的。<br>于是，基于SRJ便诞生出了利用<code>&lt;script&gt;</code>来构建跨站请求的方法JSONP：JSON with PADDING<br>虽然名字里带了JSON但这个JSONP和JSON没有半毛钱关系，不要误会了，JSONP是一种跨站请求方案的名字。</p>
<p>那么什么是JSONP呢？</p>
<p>我们前端发送跨站请求时，查询参数附上一个我们前端定好的函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> fuckBrowser = <span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (response === <span class="string">'sucess'</span>)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"scuess"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    script.src = <span class="string">'http://www.domain.com/?callbackName=fuckBrowser'</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>对面的后端接收的GET请求后作出判断，若成功，则发送响应，这个响应的内容就是让我们这边的前端执行查询参数上的函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//后端响应</span></span><br><span class="line"><span class="keyword">if</span>(响应成功条件满足)&#123;</span><br><span class="line">  <span class="comment">//这里后面的callback就是url里的?callback=''</span></span><br><span class="line">	<span class="keyword">var</span> callbackFunctionName = request.query.callback;</span><br><span class="line">  <span class="comment">//这样后端就可以知道前端定好的函数是fuckBrowser</span></span><br><span class="line">  <span class="comment">// callbackFunctionName === fuckBrowser  /*true*/</span></span><br><span class="line">  response.write(<span class="string">'callbackFunctionName.call(undefined, '</span>scuess<span class="string">')'</span>);</span><br><span class="line">  <span class="comment">//这样前端就会执行fuckBrowser并且第二个参数时scuess</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这就是一个简单JSONP例子，这样就可以达到前后端分离的跨站请求，不过我们还是要遵循一些业界的规定。</p>
<ol>
<li>这个回调函数的参数名统一命名为callback</li>
<li>callback的函数名为随机数</li>
</ol>
<p>上面的后端如果返回的不是’scuess’而是一个json对象，那么这就符合最初JSONP设计的初衷了，不过现在的JSONP更多指的是这样一种跨站请求解决方法的形式。</p>
<h3 id="JSONP总结"><a href="#JSONP总结" class="headerlink" title="JSONP总结"></a>JSONP总结</h3><p>JSONP的全称是 json with padding，它是利用SRJ（服务器响应创建js）技术来达成发送跨站请求。</p>
<ol>
<li>前端首先定义好一个用来接收后端数据的functionName(参数1， 参数2)</li>
<li>前端在发送查询请求的URL中指定一个callback参数<code>?callback=fuctionName</code>，并且这个functionName应该是由随机数组成（防止重名与缓存）</li>
<li>后端通过request解析callback的名字（后端并不需要知道它叫什么）</li>
<li>后端返回一个response，这个response是要求前端执行在1中前端定义好的functionName也就是传进来的callback</li>
<li>4中执行的callback的参数是由后端的数据提供的，可以是字符串也可以是JSON</li>
</ol>
<p>这个流程就是JSONP，解决跨站请求的方案</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-CS184-1X-笔记一-3D图像管道简要概括" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/19/CS184-1X-笔记一-3D图像管道简要概括/" class="article-date">
      <time datetime="2018-05-19T06:00:56.000Z" itemprop="datePublished">2018-05-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/19/CS184-1X-笔记一-3D图像管道简要概括/">CS184.1X 笔记一 3D图像管道简要概括</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>计算机图形的应用</p>
<ul>
<li>Movies</li>
<li>Games</li>
<li>CAD</li>
<li>Lighting Simulation </li>
<li>Visulization</li>
<li>Virtual Reality</li>
</ul>
<h2 id="制作三维图像的流程"><a href="#制作三维图像的流程" class="headerlink" title="制作三维图像的流程"></a>制作三维图像的流程</h2><p><img src="https://upload-images.jianshu.io/upload_images/5624859-0b1392910f539f93.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="Modeling"><a href="#Modeling" class="headerlink" title="Modeling"></a>Modeling</h3><p>3D几何中所谓建模就是构建现实世界的物体的<em>三角网格</em></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-46504bed8ea6726f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="Rendering"><a href="#Rendering" class="headerlink" title="Rendering"></a>Rendering</h3><h4 id="visibility"><a href="#visibility" class="headerlink" title="visibility"></a>visibility</h4><p>最早在上世纪60年代面对的最早的挑战是，<strong>visibility ( 可见化 )</strong>，当时提出了很多技术<em>消除隐藏线算法</em>和<em>消除隐藏面算法</em>。</p>
<p>举个例子，例如在这样一幅只画了线框的中，我们是无法确定物体与物体之间位置关系的。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-abf1bec0bfc885ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>通过<em>消除隐藏线算法</em>消除我们不应该看到的线，这样可以让我们观察到不同物体之间的深度。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-eb4fef172f248b51.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>继续拓展<em>消除隐藏线</em>即可延伸到<em>消除隐藏面</em>。<br> visibility的<strong>根本挑战</strong>就是这个物体在哪个物体的前面，也就是它们的层次关系。<br><a href="https://en.wikipedia.org/wiki/Ivan_Sutherland" target="_blank" rel="noopener">Ivan Sutherland</a>提出了把可视问题转为排序问题的方法，并且比较了许多算法的。</p>
<p>一旦完成了消隐之后就可以给图形上色了。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-883dc862fcc2c74a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>但是这还无法使我们满足，因为从这些图形上面还是能看到许多它们不应该出现的样子，例如一个圆体上面还有许多四边形边形。</p>
<h4 id="lighting"><a href="#lighting" class="headerlink" title="lighting"></a>lighting</h4><p>几何图形进行消隐并上色还还是不太理想，这是上世纪70年代面临的难题，<strong>如何得到几何体的好看的，色彩平滑过渡的图像？</strong></p>
<p>犹他大学的Henri Gouraud提出了处理这种多边形图案的方法，<strong>插值明暗</strong><br><img src="https://upload-images.jianshu.io/upload_images/5624859-44de234b72443f9f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这就是著名的<strong>Gouraud明暗处理</strong>，这种平滑着色法使图案看起来更加的平滑更像真正的曲目而不是刚刚那样棱角分明，在OpenGL任然使用这种方法。但是即使这样这些图案还是缺少光泽，它们只是被赋予了恒定的颜色。</p>
<p>Bui Tuong Phong提出了新的方法，<strong>Phong明暗处理（Phong光照模型）</strong>，有了<strong>镜面反射</strong>的概念。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-a4a384d380c4bb06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这种方法在图案中加入了高光。</p>
<h4 id="Global-illumination"><a href="#Global-illumination" class="headerlink" title="Global illumination"></a>Global illumination</h4><p>Turner Whited 在1980年提出了<strong>递归的光线跟踪(ray tracing)算法</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-72488028bf3916a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>另一个突破是Goral提出的<strong>模拟辐射度(radiosity)</strong><br>能够模拟光线在物体与物体之间的传递。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-b788a464dbb4fcf4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>最终Kajiya在1986年提出了<strong>渲染方程(the rendering equation)</strong>，将上面的几种技术结合到了一起，呈现了多种视觉效果。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-511b8e49f9c55b2e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/graphic/">graphic</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-前端面试题自测" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/18/前端面试题自测/" class="article-date">
      <time datetime="2018-05-18T08:41:54.000Z" itemprop="datePublished">2018-05-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/18/前端面试题自测/">前端面试题自测</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="前端面试题自测"><a href="#前端面试题自测" class="headerlink" title="前端面试题自测"></a>前端面试题自测</h1><p>学习前端有一段时间了，找了几道面试来自我检测一下，顺便记录一下自己目前的学习状况，等以后再回头看看自己的过去的理解和现在有什么不同。</p>
<h2 id="请写出一个符合-W3C-规范的-HTML-文件"><a href="#请写出一个符合-W3C-规范的-HTML-文件" class="headerlink" title="请写出一个符合 W3C 规范的 HTML 文件"></a>请写出一个符合 W3C 规范的 HTML 文件</h2><p>要求：<br>页面标题为「我的页面」<br>页面中引入了一个外部 CSS 文件，文件路径为 /style.css<br>页面中引入了另一个外部 CSS 文件，路径为 /print.css，该文件仅在打印时生效<br>页面中引入了另一个外部 CSS 文件，路径为 /mobile.css，该文件仅在设备宽度小于 500 像素时生效<br>页面中引入了一个外部 JS 文件，路径为 /main.js<br>页面中引入了一个外部 JS 文件，路径为 /gbk.js，文件编码为 GBK<br>页面中有一个 SVG 标签，SVG 里面有一个直径为 100 像素的圆圈，颜色随意</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>我的页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/style.css"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/mobile.css"</span> <span class="attr">media</span>=<span class="string">"(max-width: 500px)"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/gbk.js"</span> <span class="attr">charset</span>=<span class="string">"GBK"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">version</span>=<span class="string">"1.1"</span> <span class="attr">baseProfile</span>=<span class="string">"full"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"200"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">"150"</span> <span class="attr">cy</span>=<span class="string">"100"</span> <span class="attr">r</span>=<span class="string">"50"</span> <span class="attr">fill</span>=<span class="string">"green"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="移动端是怎么做适配的？"><a href="#移动端是怎么做适配的？" class="headerlink" title="移动端是怎么做适配的？"></a>移动端是怎么做适配的？</h2><h3 id="meta-viewport"><a href="#meta-viewport" class="headerlink" title="meta viewport"></a>meta viewport</h3><p>默认情况下浏览器会自动将宽度设置为980px，手机直接浏览页面就会被缩放成980px模式。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;</span><br></pre></td></tr></table></figure>
<p>加上这行代码就可以强制宽度为设备宽度，并且不允许缩放，最大最小默认缩放比例都为1</p>
<h3 id="media-query，"><a href="#media-query，" class="headerlink" title="media query，"></a>media query，</h3><p>使用CSS3提供的media query，它可以根据用户的设备所具有的某些特征，来写逻辑判断，再根据布尔值来提供不同的样式给不同设备的用户用于显示。</p>
<h3 id="动态REM"><a href="#动态REM" class="headerlink" title="动态REM"></a>动态REM</h3><p>使用动态rem自适应。因为rem为根元素<code>html</code>的font-size，只需要用js获取clientWidth给<code>html</code>的font-szie，就可以在需要自适应的元素上使用rem使其在不同设备上页面的比例与设计稿一致</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width=<span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">   <span class="built_in">document</span>.documentElement.style.fontSize = <span class="string">`<span class="subst">$&#123;width&#125;</span>px`</span>;</span><br><span class="line">   <span class="built_in">document</span>.body.style.fontSize = <span class="string">"16px"</span>;</span><br></pre></td></tr></table></figure>
<h2 id="实现圆角矩形和阴影怎么做"><a href="#实现圆角矩形和阴影怎么做" class="headerlink" title="实现圆角矩形和阴影怎么做?"></a>实现圆角矩形和阴影怎么做?</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.circleRect</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: pink;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>; </span><br><span class="line"></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">3px</span> <span class="number">3px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(0,0,0,0.5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="box-shadow"><a href="#box-shadow" class="headerlink" title="box-shadow"></a>box-shadow</h3><p>box-shadow的一共有6个属性，其中有4个length值</p>
<ol>
<li>offset-x和offset-y，负责阴影的xy轴偏移，以元素的左上角为原点</li>
<li>blue-radius默认为0，取值为正数，越大阴影越模糊</li>
<li><p>spread-radius，默认为0，阴影扩散层度<br>阴影还可以设置color和inset（标记后阴影在元素内部）</p>
<h3 id="border-radius"><a href="#border-radius" class="headerlink" title="border-radius"></a>border-radius</h3><p>border-radius可以设置元素的角的圆角半径（水平半径和垂直半径）</p>
</li>
</ol>
<blockquote>
<p>border-radius可以同时设置1到4个值。如果设置1个值，表示4个圆角都使用这个值。如果设置两个值，表示左上角和右下角使用第一个值，右上角和左下角使用第二个值。如果设置三个值，表示左上角使用第一个值，右上角和左下角使用第二个值，右下角使用第三个值。如果设置四个值，则依次对应左上角、右上角、右下角、左下角（顺时针顺序）。</p>
</blockquote>
<h2 id="什么是闭包，闭包的用途是什么？"><a href="#什么是闭包，闭包的用途是什么？" class="headerlink" title="什么是闭包，闭包的用途是什么？"></a>什么是闭包，闭包的用途是什么？</h2><p>闭包是函数和声明该函数的词法环境的组合。<br>如果一个函数访问了这个函数外的自由变量，那这个函数就是闭包</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> inner;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这里的inner访问了它本身作用域外的变量a，一旦调用了outer()后，返回了inner后，这个outer的变量a就会消失，但是inner保存了一份a的复制（自由变量），这时inner就是一个闭包</span></span><br></pre></td></tr></table></figure>
<p>闭包可以将闭包外的变量保存在内存中缓存起来，不让它消失，这样外部的变量就可以访问闭包内的局部变量。</p>
<p>用闭包可以模拟面向对象的私有方法</p>
<h2 id="call、apply、bind-的用法分别是什么？"><a href="#call、apply、bind-的用法分别是什么？" class="headerlink" title="call、apply、bind 的用法分别是什么？"></a>call、apply、bind 的用法分别是什么？</h2><ul>
<li>call 可以调用一个方法，call的第一个参数为this，第二个参数为可以接受若干个变量的列表。如果函数在非严格模式下，如果this的值为null或者underfine，那么this就为window对象 。</li>
<li>apply与call基本一致，唯一的区别就是apply第二个参数只能为一个列表。</li>
<li>bind是为了弥补call和apply的不足而在es5中添加的，它的作用是创建一个函数并返回这个函数，它的参数与call一样，第一个作为它的this对象，但是它并不会执行，只是将接收到的对象作为这个函数的this对象。</li>
</ul>
<h2 id="请说出至少三种排序的思路，这三种排序的时间复杂度分别为O-n-n-O-n-log2-n-O-n-max"><a href="#请说出至少三种排序的思路，这三种排序的时间复杂度分别为O-n-n-O-n-log2-n-O-n-max" class="headerlink" title="请说出至少三种排序的思路，这三种排序的时间复杂度分别为O(n*n)O(n log2 n)O(n + max)"></a>请说出至少三种排序的思路，这三种排序的时间复杂度分别为O(n*n)O(n log2 n)O(n + max)</h2><ol>
<li>冒泡排序O(n*n)，n个元素，i从0开始，每第i轮将第一个元素与每个元素相比较，大或小则交换位置，比较直到第n-i个元素。</li>
<li>快速排序O(n log2 n)，每次从待排序元素中选出一个作为基准的元素，使左边的所有元素小于基准元素，右边的都大于基准元素。将基准元素哦的左边和右边看做新的待排序区域递归排序。</li>
<li>希尔排序O(n log2 n)，根据待排序元素长度选定一个间隔，一开始先将相同间隔的元素两两交换排序，每一轮完成后减少间隔再次排序，直到间隔为1排序完毕。</li>
<li>计数排序O(n + max)，适用于小范围情况，创建一个存放排序的数组，遍历待排序元素，元素每次出现，就在存放排序数组[排序元素值]下表索引处存的值加1，最后遍历存放排序的数组即可。</li>
</ol>
<h2 id="请说出至少-8-个-HTTP-状态码，并描述各状态码的意义。"><a href="#请说出至少-8-个-HTTP-状态码，并描述各状态码的意义。" class="headerlink" title="请说出至少 8 个 HTTP 状态码，并描述各状态码的意义。"></a>请说出至少 8 个 HTTP 状态码，并描述各状态码的意义。</h2><p>200：请求成功。<br>204：请求成功，无返回实体。<br>206：请求成功，返回实体的一部分.<br>301：永久重定向，将收藏夹的地址改变。<br>302：临时重定向，下次还可以用这个地址访问。<br>304：回应GET请求，无需更新。<br>400：请求报文错误。<br>401：请求未经过允许。<br>403：服务器拒绝请求。<br>404：资源为找到或者服务器拒绝请求。<br>500：服务器错误。<br>503：服务器暂时无法处理你的请求。</p>
<h2 id="请写出一个-HTTP-post-请求的内容"><a href="#请写出一个-HTTP-post-请求的内容" class="headerlink" title="请写出一个 HTTP post 请求的内容"></a>请写出一个 HTTP post 请求的内容</h2><blockquote>
<p>GET /path HTTP/1.1<br>content-type: application/x-www-form-urlencode<br>host: <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a></p>
<p>username=ff&amp;password=123</p>
</blockquote>
<h2 id="一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？"><a href="#一个页面从输入-URL-到页面加载显示完成，这个过程中都发生了什么？" class="headerlink" title="一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？"></a>一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？</h2><ol>
<li><p>输入URL后，为了构建网络通讯（基于TCP/IP协议的IP协议），需要将URL转换为IP地址，</p>
<ul>
<li>查看浏览器缓存是否有域名对于IP地址。</li>
<li>查看系统缓存本地Hosts文件是否有域名对应IP地址。 </li>
<li>查看路由器缓存中是否有域名对应IP地址。</li>
<li>向ISP发送IP查询。</li>
<li>向根域名服务器发送IP查询。</li>
</ul>
</li>
<li><p>获取到IP地址后与服务器建立通讯后构建TCP连接。</p>
</li>
<li>将URL中的参数包装好当做请求发送给服务器。</li>
<li>接收服务器返回的响应。</li>
<li>浏览器从响应中获取html、css、js等源代码</li>
<li>浏览器根据html代码和js构建DOM树，根据css构建规则树。</li>
<li>浏览器根据DOM树和规则树渲染页面</li>
<li>加载完毕，显示页面</li>
</ol>
<h2 id="如何实现数组去重？"><a href="#如何实现数组去重？" class="headerlink" title="如何实现数组去重？"></a>如何实现数组去重？</h2><p> 利用JS Object的key的唯一性，逐个遍历数组，将值存为Object的key，value设置为非falsy值即可，最后遍历key psuh到新的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> unique = <span class="function"><span class="keyword">function</span> (<span class="params">par</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tmp = &#123;&#125;;</span><br><span class="line">    <span class="keyword">let</span> result = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> par)&#123;</span><br><span class="line">        <span class="keyword">if</span> (tmp[par[key].toString()] === <span class="literal">undefined</span>)&#123;</span><br><span class="line">            result.push(par[key]);</span><br><span class="line">        &#125;</span><br><span class="line">        tmp[par[key].toString()] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>利用ES6的set，与1同理，只是不需要设置value了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> unique1 = <span class="function"><span class="keyword">function</span> (<span class="params">par</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> par)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!result.has(par[key]))&#123;</span><br><span class="line">            result.add(par[key])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Web移动端页面-响应式和动态REM" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/11/Web移动端页面-响应式和动态REM/" class="article-date">
      <time datetime="2018-05-11T11:38:44.000Z" itemprop="datePublished">2018-05-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/11/Web移动端页面-响应式和动态REM/">Web移动端页面  --响应式和动态REM</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h2><h3 id="什么是响应式页面呢？"><a href="#什么是响应式页面呢？" class="headerlink" title="什么是响应式页面呢？"></a>什么是响应式页面呢？</h3><p>顾名思义响应式页面就是能做出响应的页面，它的页面效果不是定死的，会随着用户的改变而改变。</p>
<p>如何着手响应式有以下几个思考的方向</p>
<ol>
<li>找一份设计图</li>
<li>使用Media Query</li>
<li>隐藏元素</li>
<li>添加meta viewport</li>
<li>明白手机端交互方式的区别</li>
</ol>
<h3 id="Media-Query"><a href="#Media-Query" class="headerlink" title="Media Query"></a>Media Query</h3><h4 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h4><p>Media query 翻译过来就是媒介查询，媒介就是我们查看这个网页的设备。<br>媒介查询源于CSS3，它可以根据用户的设备所具有的某些特征，来提供不同的样式用于显示。</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h4 id="引用方式"><a href="#引用方式" class="headerlink" title="引用方式"></a>引用方式</h4><p>它的引用方式一共有两种</p>
<ul>
<li><link>元素中媒介查询</li>
<li>样式表中媒介查询</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="selector-tag">--</span> <span class="selector-tag">link</span>元素中的<span class="selector-tag">CSS</span>媒体查询 <span class="selector-tag">--</span>&gt;</span><br><span class="line">&lt;link rel="stylesheet" media="(max-width: 800px)" href="example.css" /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!<span class="selector-tag">--</span> 样式表中的<span class="selector-tag">CSS</span>媒体查询 <span class="selector-tag">--</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">600px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">body</span>&#123;</span><br><span class="line">		<span class="attribute">background</span>: red;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>在link中使用媒介查询后，即使不满足样式条件，这个样式文件依然会被下载。</p>
<h4 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h4><p>媒介查询的条件判断的逻辑操作符只有<code>and</code>,  <code>only</code>, <code>not</code>三种，多个判断条件用<code>()</code>包裹后操作符隔开。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//当媒介最大宽度为800px且是横屏时里面的样式生效</span><br><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">800px</span>) and (orientation: landscape)&#123;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Mobile-First"><a href="#Mobile-First" class="headerlink" title="Mobile First"></a>Mobile First</h4><p>目前web前端开发项目类型可以分为两种方式，Mobile First 和 Desktop First。Mobile First就是优先开发移动端后开发PC端，后者反之。</p>
<p>不同的Fist中我们Media Query针对的也不同，Mobile First中，因为我们以移动端为主，所以我们的Media Query应该是针对PC的条件去控制，Desktop Fist则针对移动端设置条件样式。</p>
<p><a href="https://jsbin.com/qecuvuv/1" target="_blank" rel="noopener">Mobile First Demo</a></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-dd5415d5de88d5e5.gif?imageMogr2/auto-orient/strip" alt=""></p>
<p>这里就用到了一开始所说隐藏</p>
<h3 id="meta-viewport"><a href="#meta-viewport" class="headerlink" title="meta viewport"></a>meta viewport</h3><p>现在，你已经写好了你的响应式网页，那么已经可以了吗？<br>别急，你离完成仅剩最后一步。</p>
<p>由于历史的原因，我们的手机在访问网页时，不管你是响应式网页还是非响应式，浏览器都会将你的宽度改为980px。</p>
<p>这是历史遗留的问题，因为最早的智能手机为了完整的显示一个网页，直接将PC上的网页缩放塞进手机浏览器中，经过调研，发现大部分的网页都是980px左右，所以当我们用手机访问网页时宽度都会被缩放到980px。</p>
<p>我们只需要加上这样一行代码就可以解决问题</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>width=device-width</code>设置页面宽度为设备宽度。<br><code>user-scalable=no</code>不允许用户缩放<br><code>initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0</code>最大最小默认缩放比例都为1。</p>
<p>这样我们的响应式网页才完全生效了。</p>
<h3 id="移动端特点"><a href="#移动端特点" class="headerlink" title="移动端特点"></a>移动端特点</h3><ol>
<li>没有hover</li>
<li>有touch</li>
<li>没有滚动条</li>
<li>没有IE</li>
<li>没有resize</li>
</ol>
<p>因为移动端是没有hover事件的所以当我们在需要兼容移动端的页面中应该尽量少用hover事件。<br>移动端一般很少监听click事件，都是以touch事件为主，JS没有滑动事件，但是可以通过touch事件模拟<br>没有IE意味着我们可以为所欲为放飞自我，使用最新的CSS和HTML。</p>
<h3 id="为什么需要响应式？"><a href="#为什么需要响应式？" class="headerlink" title="为什么需要响应式？"></a>为什么需要响应式？</h3><p>当我们需要给不同的设备显示不同网页（样式）时，为什么不可以一开始就写好多个网页再由后端负责根据用户设备来跳转呢？</p>
<p>我们写响应式需要思考非常多的问题，在一个页面里html css需要考虑很多判断逻辑，这些多出来代码以及设计的时间可能已经能够写一个新的网页，那为什么不一开始就写两个网页就好了呢？</p>
<p>确实，现在大部分互联公司现在几乎都不会去使用响应式页面。</p>
<ul>
<li>博客园：响应式</li>
<li>百度：非响应式</li>
<li>谷歌：非响应式</li>
<li>淘宝：非响应式</li>
<li>头条：非响应式</li>
<li>知乎：非响应式</li>
</ul>
<p>国内大型公司可以说基本上都是非响应式网页，只有那些交互性较弱比如个人blog，小型企业站点以展示内容为主的网站还会应用响应式设计。</p>
<h2 id="动态REM自适应"><a href="#动态REM自适应" class="headerlink" title="动态REM自适应"></a>动态REM自适应</h2><p>在了解rem之前需要先知道</p>
<ul>
<li>浏览器的默认font-size是16px</li>
<li>Font-size最优先用户在浏览器中设置的大小，chrome默认最小12px。</li>
</ul>
<h3 id="什么是rem？"><a href="#什么是rem？" class="headerlink" title="什么是rem？"></a>什么是rem？</h3><p>rem是众多number单位中的其中一个，它的值为根元素font-size的值。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">	<span class="selector-tag">body</span>&#123;<span class="attribute">font-size</span>: <span class="number">40px</span>;&#125;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">p</span>&#123;<span class="attribute">font-size</span>: <span class="number">2rem</span>;&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  word</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>!!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-020c0caa791c0245.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt=""></p>
<p>因为给<code>body</code>标签设置了40px，所以<code>body</code>里面的内容应该都是40px。但是由于<code>p</code>在后面优先设置了2rem，浏览器的默认font-size为16px，也就是<code>html</code>标签的font-size就是16px，所以现在的hello是32px。</p>
<p>也就是说rem的根元素的值指的就是<code>html</code> 的font-size的值。</p>
<h3 id="rem有什么用？"><a href="#rem有什么用？" class="headerlink" title="rem有什么用？"></a>rem有什么用？</h3><p>上面扯了那么多介绍rem，那肯定是有用的。<br>别急，让我细细道来。<br>当我们拿到设计稿，需要写一个手机用的网页时。<img src="https://upload-images.jianshu.io/upload_images/5624859-77f08d6af6022710.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300" alt=""></p>
<p>我们是希望在所有的手机上看到的页面都是一个样子的，页面内每个元素在固定的位置。但是按照常规方法，一个样式能做到让所有手机完美（90%）还原设计稿的样子吗？</p>
<p>答曰：可以，用media写响应式，针对不同的设备宽度，展现不同的样式。</p>
<p>好的，那让我们打开开发者工具模拟手机看看。</p>
<ul>
<li>iPhone X : 375 x 812</li>
<li>iPhone 6/7/8 Plus :  414 x 736</li>
<li>iPhone 6/7/8 : 375 x 667</li>
<li>iPhone 5/SE : 320 x 568</li>
<li>Galaxy S5 : 360 x 640</li>
<li>Pixel 2 : 411 x 731</li>
</ul>
<p>看到这些你还想用media吗？你要写多少个media？光是一个iPhone就可以搞死你更别说还有一堆的国产机等着你适配。</p>
<p>那怎么办呢，有没有办法可以让一个CSS适应“所有”的手机呢？</p>
<p>办法肯定有，那就是<strong>自适应</strong>，我们不需要知道用户的手机的长宽是多少，我们让网页自己匹配用户的手机长宽就好了啊。</p>
<h4 id="自适应布局"><a href="#自适应布局" class="headerlink" title="自适应布局"></a>自适应布局</h4><p>自适应布局有下面两种常规方法</p>
<ul>
<li>百分比布局：宽度百分比。</li>
<li>缩放布局：按比例设置网页宽高。</li>
</ul>
<p>这两个布局看一个比例一个百分比看上去意思是一样，其实不然。百分比布局中的宽度样式不是一个具体的值，而缩放是在已知宽度的情况下定死的值。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*device-width = 320*/</span></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">50%</span>	<span class="comment">/*160px*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">160px</span> <span class="comment">/*160px*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果我们的目的是在手机上展现body占据屏幕一半的效果的话，上面两种写法在宽度为320px的手机上效果是一样的，都是将body的宽度设置为手机的一半长。<br>现在只是在宽度为320px的手机上展现了1/2的效果，那么当我们的手机是宽度300px的时候呢？</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*device-width = 300*/</span></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">50%</span>	<span class="comment">/*150px*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">150px</span> <span class="comment">/*150px*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果是百分比布局是不是不需要改动，而按比例布局需要改动。</p>
<p>那么百分比布局能解决问题吗？</p>
<p>不行，百分比布局有个缺陷，高度是未知的，因为高度没有办法百分比，如果定死了高度那么就没有办法与宽度适应了。一旦我们的页面一复杂，未知的高度会带来更多的问题。</p>
<p>总的来说我们的页面需要靠宽度适配，再用这个宽度来决定自身的高度以达到宽高都成比例，在不同的手机上都可以按同样的比例展现。</p>
<p>那有什么方法可以准确获取手机的宽度吗？</p>
<p>这时我们的英雄登场了，<strong>rem</strong>。</p>
<p>上面说到rem是根元素font-size的值，那么我们只需要将根元素<code>html</code>的font-size为手机的宽度，这时不就可以通过rem来设置宽高样式了吗。</p>
<h3 id="rem怎么用？"><a href="#rem怎么用？" class="headerlink" title="rem怎么用？"></a>rem怎么用？</h3><p><a href="https://jsbin.com/nididum/8/edit?html,css,js,output" target="_blank" rel="noopener">动态REM demo</a></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-16e65b53db92e72b.gif?imageMogr2/auto-orient/strip" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width=<span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">`&lt;style&gt;html&#123;font-size:<span class="subst">$&#123;width <span class="regexp">/ 10&#125;px&#125;&lt;/</span>style&gt;<span class="string">`)</span></span></span></span><br></pre></td></tr></table></figure>
<p>JS代码就两行，将rem设置为手机宽度的的10%，虽然设置width / 100可以完全模拟vw（自适应不用vw是因为vw兼容性太差了），但是当em为1%时，一但宽度小于120px时，font-size就会小于12px，低于chrome默认的最小font-size就会出现bug，所以我们设置rem为10%。</p>
<p>还需要注意的是虽然width和height是用rem使用，但是不代表别的大小也需要用rem（如果字体的font-size也用rem，那当宽度很小时，字会小的看不清），我们应该搭配别的单位以获得更美观的效果。</p>
<h3 id="使用SCSS自动转换px"><a href="#使用SCSS自动转换px" class="headerlink" title="使用SCSS自动转换px"></a>使用SCSS自动转换px</h3><p>为了减少我们计算量，我们可以直接使用scss写一个function帮我们解决转换的问题。 </p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@function px( <span class="variable">$px</span> )&#123;</span><br><span class="line">  @return <span class="variable">$px</span>/<span class="variable">$designWidth</span>*<span class="number">10</span> + rem;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$designWidth</span> : <span class="number">640</span>。</span><br><span class="line"></span><br><span class="line">.box&#123;</span><br><span class="line">  background: grey;</span><br><span class="line">  <span class="attribute">width</span>: px(<span class="number">256</span>);</span><br><span class="line">  <span class="attribute">height</span>: px(<span class="number">128</span>);</span><br><span class="line">  <span class="attribute">margin</span>: px(<span class="number">32</span>) px(<span class="number">32</span>);</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-模仿jQuery的形式定义自己的addClass" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/09/模仿jQuery的形式定义自己的addClass/" class="article-date">
      <time datetime="2018-05-09T02:22:35.000Z" itemprop="datePublished">2018-05-09</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/09/模仿jQuery的形式定义自己的addClass/">模仿jQuery的形式定义自己的addClass()</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#div1"</span>).addClass(<span class="string">"red"</span>)</span><br></pre></td></tr></table></figure>
<p>要想实现jQuery这种<code>$()    //jQuery()</code>包裹一个选择器就可以找到目标Nodes很简单，只需要让我们的构造函数返回一个新的我们包装过的Node就可以了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myQuery = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> Node;</span><br><span class="line">	doSomething(node);</span><br><span class="line">	<span class="keyword">return</span>  Node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样当我们调用<code>myQuery(something)</code>就是返回跟something相关的node了。</p>
<p>当我们希望myQuery对象具有更语义化的功能，例如</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myQuery(<span class="string">"#div1"</span>).addClass();</span><br></pre></td></tr></table></figure>
<p>希望通过调用myQuery找到节点后用<code>.</code>调用方法。</p>
<p>我们只需要在myQuery构造函数中返回的对象里添加function就可以了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.myQuery = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		fun1 : <span class="function"><span class="keyword">function</span>(<span class="params">pars</span>)</span>&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就可以返回一个带有自定义方法的对象了。</p>
<p>现在将上面两个用法结合一下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.myQuery = <span class="function"><span class="keyword">function</span>(<span class="params">Node</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> node = &#123;</span><br><span class="line">        addClass: <span class="function"><span class="keyword">function</span> (<span class="params">classes</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;node.length; i++)&#123;</span><br><span class="line">                node[i].classList.add(classes)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        setText: <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; node.length; i++) &#123;</span><br><span class="line">                node[i].innerHTML = text;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">		<span class="comment">//字符串类型选择器</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> Node === <span class="string">"string"</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> nodes = <span class="built_in">window</span>.document.querySelectorAll(Node);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;nodes.length; i++)&#123;</span><br><span class="line">            node[i] = nodes[i]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        node[<span class="string">"length"</span>] = nodes.length;</span><br><span class="line">    &#125;	</span><br><span class="line">		<span class="comment">// DOM节点</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(Node <span class="keyword">instanceof</span> <span class="built_in">window</span>.Node)&#123;</span><br><span class="line">        node = &#123;</span><br><span class="line">            <span class="number">0</span> : Node,</span><br><span class="line">            length : <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.$$ = myQuery</span><br></pre></td></tr></table></figure>
<p>myQuery的构造函数利用闭包来判断传入的是一个string类型选择器还是DOM的Node类型，以返回不同长度的伪数组。</p>
<p>这样返回的一个myQuery对象，就保存了一个或多个标签节点，这时只需要调用这个对象的addClass()就可以给每个节点添加类了。</p>
<p>最后再给myQuery一个钩子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.$$ = myQuery;</span><br><span class="line">$$(<span class="string">"#div1"</span>).addClass(<span class="string">"active"</span>);</span><br></pre></td></tr></table></figure>
<p>这样就可以很轻松的找到目标并且做一些事情了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-原生JS-CSS实现一个简单带二级菜单顶部导航" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/03/原生JS-CSS实现一个简单带二级菜单顶部导航/" class="article-date">
      <time datetime="2018-05-03T06:55:07.000Z" itemprop="datePublished">2018-05-03</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/03/原生JS-CSS实现一个简单带二级菜单顶部导航/">原生JS+CSS实现一个简单带二级菜单顶部导航</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>目标是当鼠标悬浮在导航栏上时，出现指定的二级菜单。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-6df1d11cf315c276.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="https://upload-images.jianshu.io/upload_images/5624859-0fced9bec8cc50ad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>首先先将基本的导航框架写好。<br>html和css代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"topNavBar"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span>&gt;</span>介绍<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span>&gt;</span>技能<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">content</span>: <span class="string">''</span>; <span class="attribute">display</span>: block; <span class="attribute">clear</span>: both;&#125;</span><br><span class="line">        *&#123;<span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span><br><span class="line">        <span class="selector-tag">ul</span>, <span class="selector-tag">ol</span>&#123;<span class="attribute">list-style</span>: none;&#125;</span><br><span class="line">        <span class="selector-tag">a</span>&#123;<span class="attribute">text-decoration</span>: none; <span class="attribute">cursor</span>: pointer;&#125;</span><br><span class="line">        <span class="selector-tag">nav</span>&#123;<span class="attribute">position</span>: fixed; <span class="attribute">box-sizing</span>: border-box; <span class="attribute">width</span>: <span class="number">100%</span>; <span class="attribute">padding</span>:<span class="number">12px</span>; <span class="attribute">background</span>: <span class="number">#fdf5e6</span>;&#125;</span><br><span class="line">        <span class="selector-class">.topNavBar</span> &gt; <span class="selector-tag">ul</span>&#123;<span class="attribute">float</span>: right;&#125;</span><br><span class="line">        <span class="selector-class">.topNavBar</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span>&#123;<span class="attribute">float</span>: left; <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">16px</span>;&#125;</span><br><span class="line"> &lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>效果如下<img src="https://upload-images.jianshu.io/upload_images/5624859-eebb6bbcc916adfd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>接下来就是写对应的二级菜单，这个二级菜单<code>ul</code>的位置很关键，可以写在一级导航<code>li</code>的<code>a</code>里面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span>&gt;</span>技能</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>javascript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>html<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>css<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>也可以写在<code>a</code>外面。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span>&gt;</span>技能<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>javascript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>html<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>css<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>为了不使<code>a</code>标签变得复杂和结构混乱，我们选择后者。（这才是正常人的做法吧- -!）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-1f3d98b8cf6f2b2f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>为了不让二级菜单占据父元素的宽度，我们让它定位以脱离文档流。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-a3f275a5eb8bdcc7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.topNavBar</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-tag">ul</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span>; </span><br><span class="line">  <span class="attribute">position</span>: absolute; </span><br><span class="line">  <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: white; </span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  box- shadow: 0 0 5px rgb(0, 0, 0, 0.5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>absolute定位后，<code>li</code>元素会被压缩，nowrap禁止换行。</p>
<p>到目前为止，这个顶部导航栏的主干的html部分和css部分基本完成，就剩下js部分了。<br>因为我们是想通过鼠标悬浮显示二级菜单，那么我们只需要一开始就把二级菜单隐藏，当鼠标移动到一级导航时显示二级菜单就好了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">let</span> liTags = <span class="built_in">document</span>.querySelectorAll(<span class="string">".topNavBar &gt; ul &gt; li"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;liTags.length; i++)&#123;</span><br><span class="line">        liTags[i].onmouseenter = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> li = e.currentTarget;</span><br><span class="line">            li.classList.add(<span class="string">"active"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        liTags[i].onmouseleave = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> li = e.currentTarget;</span><br><span class="line">            li.classList.remove(<span class="string">"active"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="selector-class">.topNavBar</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span>. &gt; <span class="selector-tag">u</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;    </span><br><span class="line"><span class="selector-class">.topNavBar</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-class">.active</span> &gt; <span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-392523dd421a1b6f.gif?imageMogr2/auto-orient/strip" alt=""></p>
<p>现在一个干净简单的导航栏就完成了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-CSS绝对定位top-100-和bottom-0的区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/04/25/CSS绝对定位top-100-和bottom-0的区别/" class="article-date">
      <time datetime="2018-04-25T00:19:05.000Z" itemprop="datePublished">2018-04-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/25/CSS绝对定位top-100-和bottom-0的区别/">CSS绝对定位top: 100%和bottom:0的区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>我在写顶部导航栏时，需要给<code>li</code>元素下方添加一个横线动画</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.top-nav</span> <span class="selector-tag">nav</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#e6686d</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是还没有给横线添加定位的时候。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-4a078cd929e5a122.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="https://upload-images.jianshu.io/upload_images/5624859-0c008d2190f116ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-9bcf04bf943d2e2f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>添加<code>top: 100%</code>后，可以发现横线移动到了父元素的border外。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-dd42ead3aa36fda9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="https://upload-images.jianshu.io/upload_images/5624859-1fcf912865fb1087.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-29e0f824aa400360.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>而<code>bottom: 0px</code>并没有超过父元素的boder，而是在boder只上延伸。<br><img src="https://upload-images.jianshu.io/upload_images/5624859-067bfdb61bfbfe4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-3a6a304673e1710d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5624859-defa1be619d9cc3e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><strong>结论</strong><br><strong><code>top: 100%</code>的定位是以父元素border下界为基线，向下延伸。</strong><br><strong><code>bottom: 0px</code>的定位是以父元素border上界为基线，向上延伸。</strong></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JS中的1-toString" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/04/22/JS中的1-toString/" class="article-date">
      <time datetime="2018-04-22T14:59:23.000Z" itemprop="datePublished">2018-04-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/22/JS中的1-toString/">JS中的1.toString()</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>当我们在console执行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>toString() </span><br><span class="line"><span class="comment">//Uncaught SyntaxError: Invalid or unexpected token</span></span><br></pre></td></tr></table></figure>
<p>JS会给我们报语法错误，那么这是为什么呢？</p>
<p>因为在JS中,<code>.</code>点操作符意味着调用Object的属性或者这是一个浮点数。</p>
<p>当<code>.</code>跟在一个数字后面就意味着这个数字是一个浮点数，在<code>.</code>后面JS等待着一个数字。<br>所以在调用<code>.toString()</code>之前，我们需要告诉JS这是就是我们要的数字。</p>
<p>所以可以这样</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>.toString() <span class="comment">//1.就是1.0就是1</span></span><br><span class="line"><span class="number">1.0</span>.toString() <span class="comment">//与上面同理</span></span><br><span class="line">(<span class="number">1</span>).toString() <span class="comment">//(1)是一个表达式代表这就是一个1</span></span><br><span class="line"><span class="number">1</span> .toString()</span><br><span class="line"><span class="number">1</span><span class="comment">//换行，奇葩写法，与上面一样</span></span><br><span class="line">toString()</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Go-学习记录（一）" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/04/21/Go-学习记录（一）/" class="article-date">
      <time datetime="2018-04-21T04:45:47.000Z" itemprop="datePublished">2018-04-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/21/Go-学习记录（一）/">Go 学习记录（一）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="package"><a href="#package" class="headerlink" title="package"></a>package</h2><h3 id="package-声明"><a href="#package-声明" class="headerlink" title="package 声明"></a>package 声明</h3><p>每个Go程序都是又包构成，程序执行的入门就是main包。<br>程序顶行声明包名。<br><code>package [packageName]</code></p>
<h3 id="package-导入"><a href="#package-导入" class="headerlink" title="package 导入"></a>package 导入</h3><p>有两种方式导入包。</p>
<ol>
<li>一行一行导入<br><code>Import “[packageName]”</code></li>
<li>一次性导入，既“分组导入”<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Exported-name-导出名"><a href="#Exported-name-导出名" class="headerlink" title="Exported name 导出名"></a>Exported name 导出名</h3><blockquote>
<p>在 Go 中，如果一个名字以大写字母开头，那么它就是已导出的。<br>意思是，当我们写一个package时，如果声明的变量（函数）是以小写开头，那它就是私有的，当被别的package import时是无法访问这个变量（函数）的。</p>
</blockquote>
<h2 id="func-函数"><a href="#func-函数" class="headerlink" title="func 函数"></a>func 函数</h2><p>在Go中，变量类型放在变量后面，返回类型放在函数名后面。<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="keyword">int</span>, y <span class="keyword">int</span>)</span> <span class="title">int</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Go语言之所以用这样的语法，是因为当涉及到复杂的指针时，变量会变得难以理解以及不美观，例如<br><code>int (*fp)(int (*ff)(int x, int y), int b)</code><br>这是一个指向函数的指针，函数里的参数又是一个指向另一个函数的指针，让人头晕。<br>Go语言的类型后置更方便我们人类阅读。<br>例如，当我们用人类语言描述一样物品会使用这样的方式<br>Iphone：apple公司的智能手机。<br>Go语言只不过是把冒号和一些标点符号去掉而已。<br>x : 一个整数 ==&gt;  x int</p>
<h3 id="类型省略"><a href="#类型省略" class="headerlink" title="类型省略"></a>类型省略</h3><p>当函数的参数类型都一样时，可以省略除最后一个以外的类型。<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x + y	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="多值返回"><a href="#多值返回" class="headerlink" title="多值返回"></a>多值返回</h3><p>Go可以一次返回多个值，只需要在函数声明时写上全部返回类型就可以。（不可省略）<br>当接受多个返回时使用<code>:=</code>  <code>arg1, arg2:=func(args)</code><br><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, <span class="keyword">string</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x, y</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	a, b:= add(<span class="string">"hello"</span>, <span class="string">"world"</span>)</span><br><span class="line">	fmt.Println(a,b) <span class="comment">// hello world</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="var-变量声明"><a href="#var-变量声明" class="headerlink" title="var 变量声明"></a>var 变量声明</h3><p>在Go中，用var 声明变量，准确的说是声明一个变量列表，看下面一段代码就可理解。<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> a, b, c <span class="keyword">int</span> = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line">	fmt.Println(a+b+c) <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>var a, b, c int</code>    声明了一个列表，之后一次给列表的元素赋值。</p>
<h4 id="Short-variable-短变量"><a href="#Short-variable-短变量" class="headerlink" title="Short variable 短变量"></a>Short variable 短变量</h4><p>短变量是指func里的变量，也即是局部变量，局部变量当值已知时，可以不需要类型声明用<code>:=</code>声明</p>
<blockquote>
<p>在声明一个变量而不指定其类型时（即使用不带类型的 := 语法或 var = 表达式语法），变量的类型由右值推导得出。<br><code>var a := 1</code></p>
</blockquote>
<h4 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h4><p>Go的基本变量类型有</p>
<ul>
<li>bool</li>
<li>string</li>
<li>int</li>
<li>float</li>
<li>complex<br>除了这些之外，还有其它很多类型及其衍生，上述几种数字类型还有还有不同长度或者无符号的，例如int8, int6, uint32，这些以后再说。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/">Go</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2018 Liang Jiahao
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 4;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>